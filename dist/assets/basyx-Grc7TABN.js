import{R as d,a as i}from"./sidepanel-C1pfGHNS.js";import"./shield-cALfkkfC.js";import"./aas-validator-kPtQI88i.js";import"./ai-anthropic-DXpFFBEc.js";import"./jszip-B-jFFAGa.js";import"./id-resolver-BQbKsSbj.js";import"./settings-B4XEWWU_.js";class w extends d{constructor(t){super(t)}convertEndpoint(t){var e;return{href:((e=t.protocolInformation)==null?void 0:e.href)||"",interface:t.interface,protocolInformation:t.protocolInformation?{endpointProtocol:t.protocolInformation.endpointProtocol,endpointProtocolVersion:t.protocolInformation.endpointProtocolVersion}:void 0}}convertShellDescriptor(t){var e,o,r,s;return{id:t.id,idShort:t.idShort,description:(o=(e=t.description)==null?void 0:e[0])==null?void 0:o.text,assetKind:(r=t.assetInformation)==null?void 0:r.assetKind,globalAssetId:(s=t.assetInformation)==null?void 0:s.globalAssetId,endpoints:(t.endpoints||[]).map(n=>this.convertEndpoint(n))}}convertSubmodelDescriptor(t){var e,o,r;return{id:t.id,idShort:t.idShort,semanticId:(r=(o=(e=t.semanticId)==null?void 0:e.keys)==null?void 0:o[0])==null?void 0:r.value,endpoints:(t.endpoints||[]).map(s=>this.convertEndpoint(s))}}async testConnection(){try{return await this.fetch("/shell-descriptors?limit=1"),!0}catch(t){return t instanceof i&&t.status===0?!1:t instanceof i&&t.status>0}}async listShells(t=50,e){var s,n;let o=`/shell-descriptors?limit=${t}`;e&&(o+=`&cursor=${encodeURIComponent(e)}`);const r=await this.fetch(o);return{shells:r.result.map(a=>this.convertShellDescriptor(a)),cursor:(s=r.paging_metadata)==null?void 0:s.cursor,hasMore:!!((n=r.paging_metadata)!=null&&n.cursor)}}async getShell(t){const e=encodeURIComponent(btoa(t)),o=await this.fetch(`/shell-descriptors/${e}`);return this.convertShellDescriptor(o)}async getShellEnvironment(t){const e=encodeURIComponent(btoa(t)),o=await this.fetch(`/shells/${e}`),r=await this.fetch(`/shells/${e}/submodels`);return{assetAdministrationShells:[o],submodels:r.result||[],conceptDescriptions:[]}}async searchShells(t){var o,r;const e=`/shell-descriptors?idShort=${encodeURIComponent(t)}`;try{const s=await this.fetch(e);return{shells:s.result.map(n=>this.convertShellDescriptor(n)),cursor:(o=s.paging_metadata)==null?void 0:o.cursor,hasMore:!!((r=s.paging_metadata)!=null&&r.cursor)}}catch(s){if(s instanceof i&&s.status===400)return{shells:(await this.listShells(100)).shells.filter(c=>{var l;return((l=c.idShort)==null?void 0:l.toLowerCase().includes(t.toLowerCase()))||c.id.toLowerCase().includes(t.toLowerCase())}),hasMore:!1};throw s}}async listSubmodels(t){const o=`/shell-descriptors/${encodeURIComponent(btoa(t))}/submodel-descriptors`;return(await this.fetch(o)).result.map(s=>this.convertSubmodelDescriptor(s))}}export{w as BaSyxClient};
