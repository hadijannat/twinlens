const s=/^https?:\/\/id\.([^/]+)\/([^/]+)\/([^/]+)(?:\/([^/?#]+))?/,a=/^https?:\/\/(?:id\.gs1\.org|dlnkd\.tn\.gg)\/(\d{2})\/(\d+)/,o=[/\/shells\//i,/\/submodels\//i,/\/aas\//i,/\/api\/v\d+\/aas/i,/\/registry\//i],l=[/battery[-_]?passport/i,/dpp\..*\/passport/i,/digitalproductpassport/i];function p(r){return o.some(t=>t.test(r))}function c(r){return l.some(t=>t.test(r))}function u(r){const t=r.match(s);if(!t)return null;const[,,i,n,e]=t;return{manufacturer:i,productType:n,identifier:e||`${i}/${n}`}}function d(r){const t=r.match(a);if(!t)return null;const[,i,n]=t;return{identifier:`${i==="01"?"GTIN":`AI(${i})`}:${n}`}}function f(r){const t=r.trim();try{new URL(t)}catch{return{type:"unknown",url:t,originalUrl:r}}if(t.toLowerCase().endsWith(".aasx"))return{type:"aas",url:t,originalUrl:r};if(p(t))return{type:"aas",url:t,originalUrl:r};if(c(t))return{type:"passport",url:t,originalUrl:r};const i=u(t);if(i)return{type:"passport",url:t,originalUrl:r,...i};const n=d(t);return n?{type:"passport",url:t,originalUrl:r,...n}:{type:"url",url:t,originalUrl:r}}function T(r){try{const t=new URL(r);return t.protocol==="https:"||t.protocol==="http:"}catch{return!1}}export{T as i,f as r};
